(function(e,t){"use strict";function i(e,t,r){if(typeof e!=="string"||!e){return}this.urlService=e;this.timeout=0;this.lastCheck="";this.inputActive=false;this.options={elements:{},resultList:false,resultClassName:"result",delayCheck:300,minChars:3,killerFn:true};this.customFunctions=false;if(r&&typeof (r==="function")){this.customFunctions=r}t=t||{};Object.keys(t).forEach(function(e){this.options[e]=t[e]}.bind(this));this.elementsList=[].slice.call(this.options.elements);n(function(){this.init()}.bind(this))}var n,r;n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)};r=function(e,t){function n(){if(t&&typeof t==="function"){t(this.responseText)}}if(e&&typeof e!=="string"){return}var r=new XMLHttpRequest;r.onload=n;r.open("get",e,true);r.send()};i.prototype.init=function(){this.initialized=true;this.createResultList();this.elementsList.forEach(function(e){this.addEvents(e)}.bind(this))};i.prototype.createResultList=function(){if(typeof this.options.resultList==="object"&&this.options.resultList.tagName){this.resultList=this.options.resultList;return}this.resultList=t.createElement("ul");if(typeof this.options.resultClassName==="string"){this.resultList.classList.add(this.options.resultClassName)}t.body.appendChild(this.resultList)};i.prototype.addEvents=function(e){e.addEventListener("keypress",function(t){this.inputActive=e;clearTimeout(this.timeoutFn);this.timeoutFn=setTimeout(function(){this.checkNeedSuggest(e,t)}.bind(this),this.options.delayCheck)}.bind(this))};i.prototype.checkNeedSuggest=function(e,t){var n=false;if(e.value){n=e.value}else{return}if(n&&n.length>=this.options.minChars&&n!==this.lastCheck){this.lastCheck=n;this.checkSuggest(this.lastCheck);return}this.resultList.style.display="none"};i.prototype.checkSuggest=function(e){r(this.urlService,function(e){this.showResult(e)}.bind(this))};i.prototype.showResult=function(e){this.resultList.innerHTML="";this.resultList.style.display="block";if(e&&typeof e==="object"){e.forEach(function(e){this.addResponse(e)}.bind(this))}if(this.options.killerFn){var n=function(e){var r=e.target;var i=true;if(r&&r===this.inputActive){i=false}else{while(r&&r.parent!=="null"&&r.parentNode!==t.body){r=r.parentNode;if(r===this.resultList){i=false;break}}}if(i){clearTimeout(this.timeoutFn);this.resultList.style.display="none";t.body.removeEventListener("click",n)}}.bind(this);t.body.addEventListener("click",n,false)}};i.prototype.addResponse=function(e){var n=t.createElement("li");if(this.customFunctions){this.customFunctions(n,e)}else{n.innerHTML=e.msg}this.resultList.appendChild(n)};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=exports=i}else if(typeof define==="function"&&define.amd){define(function(){return i})}else if(typeof e==="object"){e.Autocomplete=i}})(window,document)(function(e,t){"use strict";function i(e,t,r){if(typeof e!=="string"||!e){return}this.urlService=e;this.timeout=0;this.lastCheck="";this.inputActive=false;this.options={elements:{},resultList:false,resultClassName:"result",delayCheck:300,minChars:3,killerFn:true};this.customFunctions=false;if(r&&typeof (r==="function")){this.customFunctions=r}t=t||{};Object.keys(t).forEach(function(e){this.options[e]=t[e]}.bind(this));this.elementsList=[].slice.call(this.options.elements);n(function(){this.init()}.bind(this))}var n,r;n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)};r=function(e,t){function n(){if(t&&typeof t==="function"){t(this.responseText)}}if(e&&typeof e!=="string"){return}var r=new XMLHttpRequest;r.onload=n;r.open("get",e,true);r.send()};i.prototype.init=function(){this.initialized=true;this.createResultList();this.elementsList.forEach(function(e){this.addEvents(e)}.bind(this))};i.prototype.createResultList=function(){if(typeof this.options.resultList==="object"&&this.options.resultList.tagName){this.resultList=this.options.resultList;return}this.resultList=t.createElement("ul");if(typeof this.options.resultClassName==="string"){this.resultList.classList.add(this.options.resultClassName)}t.body.appendChild(this.resultList)};i.prototype.addEvents=function(e){e.addEventListener("keypress",function(t){this.inputActive=e;clearTimeout(this.timeoutFn);this.timeoutFn=setTimeout(function(){this.checkNeedSuggest(e,t)}.bind(this),this.options.delayCheck)}.bind(this))};i.prototype.checkNeedSuggest=function(e,t){var n=false;if(e.value){n=e.value}else{return}if(n&&n.length>=this.options.minChars&&n!==this.lastCheck){this.lastCheck=n;this.checkSuggest(this.lastCheck);return}this.resultList.style.display="none"};i.prototype.checkSuggest=function(e){r(this.urlService,function(e){this.showResult(e)}.bind(this))};i.prototype.showResult=function(e){this.resultList.innerHTML="";this.resultList.style.display="block";if(e&&typeof e==="object"){e.forEach(function(e){this.addResponse(e)}.bind(this))}if(this.options.killerFn){var n=function(e){var r=e.target;var i=true;if(r&&r===this.inputActive){i=false}else{while(r&&r.parent!=="null"&&r.parentNode!==t.body){r=r.parentNode;if(r===this.resultList){i=false;break}}}if(i){clearTimeout(this.timeoutFn);this.resultList.style.display="none";t.body.removeEventListener("click",n)}}.bind(this);t.body.addEventListener("click",n,false)}};i.prototype.addResponse=function(e){var n=t.createElement("li");if(this.customFunctions){this.customFunctions(n,e)}else{n.innerHTML=e.msg}this.resultList.appendChild(n)};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=exports=i}else if(typeof define==="function"&&define.amd){define(function(){return i})}else if(typeof e==="object"){e.Autocomplete=i}})(window,document)